<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Profile</title>
    <link rel="stylesheet" href="/client/css/style.css" />
    <link rel="stylesheet" href="/client/css/product.css" />
    <link rel="stylesheet" href="/client/css/profile.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css"
      integrity="sha512-5Hs3dF2AEPkpNAR7UiOHba+lRSJNeM2ECkwxUIxC1Q/FLycGTbNapWXB4tP889k5T5Ju8fs4b1P5z/iB4nMfSQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  </head>
  <body>
    <!-- Include header.ejs -->
    <%- include('../../partials/header.ejs') %>
    <main>
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <div class="top-breadcrumb">
              <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                  <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                  <li class="breadcrumb-item active" aria-current="page">
                    Profile
                  </li>
                </ol>
              </nav>
            </div>
          </div>
        </div>
        <div
          class="img"
          style="
            background-image: linear-gradient(
                150deg,
                rgba(63, 174, 255, 0.3) 15%,
                rgba(63, 174, 255, 0.3) 70%,
                rgba(63, 174, 255, 0.3) 94%
              ),
              url(https://bootdey.com/img/Content/flores-amarillas-wallpaper.jpeg);
            height: 350px;
            background-size: cover;
          "
        ></div>
        <div class="card social-prof">
          <div class="card-body">
            <div class="wrapper">
              <img src="<%=user.thumbnail%>" alt="" class="user-profile" />
              <h3><%=user.fullName%></h3>
              <p>Web Developer</p>
            </div>
            <div class="row">
              <div class="col-lg-12">
                <ul class="nav nav-tabs justify-content-center s-nav">
                  <li><a class="active" href="#">Timeline</a></li>
                  <li><a href="#">About</a></li>
                  <li><a href="#">Friends</a></li>
                  <li><a href="#">Photos</a></li>
                  <li><a href="#">Videos</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-3">
            <div class="card">
              <div class="card-body">
                <div class="h5 text-blue">@JaneSmith</div>
                <div class="h7"><strong>Name :</strong> Jane Smith</div>
                <div class="h7">
                  <strong>About :</strong> Developer of web applications,
                  JavaScript, PHP, Java, Python, Ruby, Java, Node.js, etc.
                </div>
              </div>
              <ul class="list-group list-group-flush">
                <li class="list-group-item">
                  <div class="h6 text-muted">Followers</div>
                  <div class="h5">5.2342</div>
                </li>
                <li class="list-group-item">
                  <div class="h6 text-muted">Following</div>
                  <div class="h5">6758</div>
                </li>
                <li class="list-group-item">
                  <div class="h6 text-muted">Themes</div>
                  <div class="h5">6758</div>
                </li>
              </ul>
            </div>
            <div class="card">
              <div class="card-body">
                <h3 class="card-title">Latest Photos</h3>
                <div
                  id="carouselExampleIndicators"
                  class="carousel slide"
                  data-ride="carousel"
                >
                  <ol class="carousel-indicators">
                    <li
                      data-target="#carouselExampleIndicators"
                      data-slide-to="0"
                      class=""
                    ></li>
                    <li
                      data-target="#carouselExampleIndicators"
                      data-slide-to="1"
                      class=""
                    ></li>
                    <li
                      data-target="#carouselExampleIndicators"
                      data-slide-to="2"
                      class="active"
                    ></li>
                  </ol>
                  <div class="carousel-inner">
                    <div class="carousel-item">
                      <img
                        src="<%=user.thumbnail%>"
                        class="d-block w-100"
                        alt="..."
                      />
                    </div>
                    <div class="carousel-item">
                      <img
                        src="<%=user.thumbnail%>"
                        class="d-block w-100"
                        alt="..."
                      />
                    </div>
                    <div class="carousel-item active">
                      <img
                        src="<%=user.thumbnail%>"
                        class="d-block w-100"
                        alt="..."
                      />
                    </div>
                  </div>
                  <a
                    class="carousel-control-prev"
                    href="#carouselExampleIndicators"
                    role="button"
                    data-slide="prev"
                  >
                    <span
                      class="carousel-control-prev-icon"
                      aria-hidden="true"
                    ></span>
                    <span class="sr-only">Previous</span>
                  </a>
                  <a
                    class="carousel-control-next"
                    href="#carouselExampleIndicators"
                    role="button"
                    data-slide="next"
                  >
                    <span
                      class="carousel-control-next-icon"
                      aria-hidden="true"
                    ></span>
                    <span class="sr-only">Next</span>
                  </a>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-6 gedf-main">
            <!--- \\\\\\\Post-->
            <form action="/post/create" method="POST">
              <div class="card social-timeline-card">
                <div class="card-header">
                  <ul
                    class="nav nav-tabs card-header-tabs"
                    id="myTab"
                    role="tablist"
                  >
                    <li class="nav-item">
                      <a
                        class="nav-link active"
                        id="posts-tab"
                        data-toggle="tab"
                        href="#posts"
                        role="tab"
                        aria-controls="posts"
                        aria-selected="true"
                        >Share your insights</a
                      >
                    </li>
                    <li class="nav-item">
                      <a
                        class="nav-link"
                        id="images-tab"
                        data-toggle="tab"
                        role="tab"
                        aria-controls="images"
                        aria-selected="false"
                        href="#images"
                        >Share Images</a
                      >
                    </li>
                  </ul>
                </div>
                <div class="card-body">
                  <div class="tab-content" id="myTabContent">
                    <div
                      class="tab-pane fade active show"
                      id="posts"
                      role="tabpanel"
                      aria-labelledby="posts-tab"
                    >
                      <div class="form-group">
                        <label class="sr-only" for="message">post</label>
                        <textarea
                          class="form-control"
                          id="message"
                          rows="3"
                          placeholder="What are you thinking?"
                          name="message"
                        ></textarea>
                      </div>
                    </div>
                    <div
                      class="tab-pane fade"
                      id="images"
                      role="tabpanel"
                      aria-labelledby="images-tab"
                    >
                      <div class="form-group">
                        <div class="custom-file">
                          <input
                            type="file"
                            class="custom-file-input"
                            id="customFile"
                          />
                          <label class="custom-file-label" for="customFile"
                            >Upload image</label
                          >
                        </div>
                      </div>
                      <div class="py-4"></div>
                    </div>
                  </div>
                  <div class="btn-toolbar justify-content-between">
                    <div class="btn-group">
                      <button type="submit" class="btn btn-primary">
                        Đăng Bài
                      </button>
                    </div>
                    <div class="btn-group">
                      <button
                        id="btnGroupDrop1"
                        type="button"
                        class="btn btn-link dropdown-toggle"
                        data-toggle="dropdown"
                        aria-haspopup="true"
                        aria-expanded="false"
                      >
                        <i class="fa fa-globe"></i>
                      </button>
                      <div
                        class="dropdown-menu"
                        aria-labelledby="btnGroupDrop1"
                      >
                        <a class="dropdown-item" href="#" data-value="public"
                          ><i class="fa fa-globe"></i> Public</a
                        >
                        <a class="dropdown-item" href="#" data-value="friends"
                          ><i class="fa fa-users"></i> Friends</a
                        >
                        <a class="dropdown-item" href="#" data-value="just_me"
                          ><i class="fa fa-user"></i> Just me</a
                        >
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </form>
            <!-- Post /////-->
            <!--- \\\\\\\Post-->
            <%posts.forEach(item=>{ %>
            <div class="card social-timeline-card">
              <div class="card-header">
                <div class="d-flex justify-content-between align-items-center">
                  <div
                    class="d-flex justify-content-between align-items-center"
                  >
                    <div class="mr-2">
                      <img
                        class="rounded-circle"
                        width="45"
                        src="<%=user.thumbnail%>"
                        alt=""
                      />
                    </div>
                    <div class="ml-2">
                      <div class="h5 m-0 text-blue">
                        <a href="/user/profile/<%=user.userIdentifier%>"
                          >@<%=user.fullName%></a
                        >
                      </div>
                      <div class="h7 text-muted"><%=user.fullName%></div>
                    </div>
                  </div>
                  <div>
                    <div class="dropdown">
                      <button
                        class="btn btn-link dropdown-toggle"
                        type="button"
                        id="gedf-drop11"
                        data-toggle="dropdown"
                        aria-haspopup="true"
                        aria-expanded="false"
                      >
                        <i class="fa fa-ellipsis-h"></i>
                      </button>
                      <div
                        class="dropdown-menu dropdown-menu-right"
                        aria-labelledby="gedf-drop11"
                      >
                        <div class="h6 dropdown-header">Configuration</div>
                        <a class="dropdown-item" href="#">Save</a>
                        <a class="dropdown-item" href="#">Hide</a>
                        <a class="dropdown-item" href="#">Report</a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="card-body">
                <div class="text-muted h7 mb-2">
                  <% let createdAt = new Date(item.publishedDate); let now = new
                  Date(); let diffInMs = now - createdAt; let diffInMinutes =
                  Math.floor(diffInMs / (1000 * 60)); let diffInHours =
                  Math.floor(diffInMs / (1000 * 60 * 60)); %>

                  <i class="fa fa-clock-o"></i>
                  <% if (diffInHours > 24) { %>
                  <!-- Nếu thời gian đã qua hơn 24 giờ, hiển thị ngày giờ chính xác -->
                  <%= new Date(item.publishedDate).toLocaleString() %> <% } else
                  { %>
                  <!-- Nếu thời gian đã qua ít hơn 24 giờ -->
                  <% if (diffInMinutes >= 60) { %>
                  <!-- Nếu sự khác biệt lớn hơn 60 phút, hiển thị số giờ và reset phút -->
                  <%= diffInHours %> hours ago <% } else { %>
                  <!-- Nếu sự khác biệt nhỏ hơn 60 phút, chỉ hiển thị số phút -->
                  <%= diffInMinutes %> minutes ago <% } %> <% } %>
                </div>
                <h5 class="card-title"><%=item.message%></h5>
                <img src="img/gallery/1a.jpg" alt="" class="img-fluid" />
              </div>
              <div class="card-footer">
                <button
                  data-post-id="<%= item.id %>"
                  class="card-link"
                  id="react-post"
                  style="
                    background: none;
                    border: none;
                    padding: 0;
                    font: inherit;
                    color: inherit;
                    outline: none;
                  "
                >
                  <i class="fa-solid fa-thumbs-up text-primary"></i>
                  <span class="text-primary">
                    <%= item.likes.quantityNumber >= 1 ?
                    item.likes.quantityNumber : '' %> Like
                  </span>
                </button>

                <a href="#" class="card-link"
                  ><i class="fa fa-comment"></i> Comment</a
                >
                <a href="#" class="card-link"
                  ><i class="fa fa-mail-forward"></i> Share</a
                >
              </div>
            </div>
            <%})%>
            <!-- Post /////-->
          </div>
          <div class="col-lg-3">
            <div class="card social-timeline-card">
              <div class="card-body">
                <h5 class="card-title">People you may know</h5>
                <ul class="friend-list">
                  <%userMayKnow.forEach(item=>{%>
                  <a
                    href="/user/profile/<%=item.userIdentifier%>"
                    class="text-dark text-decoration-none"
                  >
                    <li>
                      <div class="left">
                        <img src="<%=item.thumbnail%>" alt="" />
                      </div>
                      <div class="right">
                        <h3><%=item.fullName%></h3>
                        <p>... Friends</p>
                      </div>
                    </li>
                  </a>
                  <%})%>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
    <form
      action=""
      method="post"
      dataPath="/user/profile"
      userId="<%=user.id%>"
      id="change-post-react"
    ></form>
    <!-- Include footer.ejs -->
    <%- include('../../partials/footer.ejs') %>

    <!-- Scripts -->
    <script src="/client/js/post.js"></script>
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
